webpackJsonp([5],{555:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,s,o,c=i(0),a=(i(14),i(77)),r=i.n(a),h=(i(16),i(557),i(5)),d=i(83),u=i(113),l=Object(h.k)("swipe-cell"),f=l[0],p=l[1],m=f({mixins:[d.a,(n={event:"touchstart",method:"onClick"},{mounted:function(){var t=this;n.handler=function(e){t.$el.contains(e.target)||t[n.method]()},Object(u.b)(document,n.event,n.handler)},beforeDestroy:function(){Object(u.a)(document,n.event,n.handler)}})],props:{onClose:Function,disabled:Boolean,leftWidth:Number,rightWidth:Number},data:function(){return{offset:0,dragging:!1}},methods:{open:function(t){var e="left"===t?this.leftWidth:-this.rightWidth;this.swipeMove(e),this.resetSwipeStatus()},close:function(){this.offset=0},resetSwipeStatus:function(){this.swiping=!1,this.opened=!0},swipeMove:function(t){void 0===t&&(t=0),this.offset=Object(h.j)(t,-this.rightWidth,this.leftWidth),this.offset?this.swiping=!0:this.opened=!1},swipeLeaveTransition:function(t){var e=this.offset,i=this.leftWidth,n=this.rightWidth,s=this.opened?.85:.15;"right"===t&&-e>n*s&&n>0?this.open("right"):"left"===t&&e>i*s&&i>0?this.open("left"):this.swipeMove(0)},startDrag:function(t){this.disabled||(this.dragging=!0,this.startOffset=this.offset,this.touchStart(t))},onDrag:function(t){this.disabled||(this.touchMove(t),"horizontal"===this.direction&&(t.preventDefault(),this.swipeMove(this.deltaX+this.startOffset)))},endDrag:function(){this.disabled||(this.dragging=!1,this.swiping&&this.swipeLeaveTransition(this.offset>0?"left":"right"))},onClick:function(t){void 0===t&&(t="outside"),this.$emit("click",t),this.offset&&(this.onClose?this.onClose(t,this):this.swipeMove(0))}},render:function(t){var e=this,i=function(t,i){return function(n){i&&n.stopPropagation(),e.onClick(t)}},n={transform:"translate3d("+this.offset+"px, 0, 0)",transition:this.dragging?"none":".6s cubic-bezier(0.18, 0.89, 0.32, 1)"};return t("div",{class:p(),on:{click:i("cell"),touchstart:this.startDrag,touchmove:this.onDrag,touchend:this.endDrag,touchcancel:this.endDrag}},[t("div",{class:p("wrapper"),style:n,on:{transitionend:function(){e.swiping=!1}}},[this.leftWidth?t("div",{class:p("left"),on:{click:i("left",!0)}},[this.slots("left")]):null,this.slots(),this.rightWidth?t("div",{class:p("right"),on:{click:i("right",!0)}},[this.slots("right")]):null])])}}),g=Object(h.k)("checkbox-group"),b=g[0],v=g[1],k=b({props:{max:Number,value:Array,disabled:Boolean},watch:{value:function(t){this.$emit("change",t)}},render:function(t){return t("div",{class:v()},[this.slots()])}}),w=(i(168),i(169)),x=(i(559),i(266)),O=Object(h.k)("checkbox"),_=O[0],j=O[1],C=_({mixins:[Object(x.a)("van-checkbox-group",j)],computed:{checked:{get:function(){return this.parent?-1!==this.parent.value.indexOf(this.name):this.value},set:function(t){this.parent?this.setParentValue(t):this.$emit("input",t)}}},watch:{value:function(t){this.$emit("change",t)}},methods:{toggle:function(){this.checked=!this.checked},onClickIcon:function(){this.isDisabled||this.toggle()},onClickLabel:function(){this.isDisabled||this.labelDisabled||this.toggle()},setParentValue:function(t){var e=this.parent,i=e.value.slice();if(t){if(e.max&&i.length>=e.max)return;-1===i.indexOf(this.name)&&(i.push(this.name),e.$emit("input",i))}else{var n=i.indexOf(this.name);-1!==n&&(i.splice(n,1),e.$emit("input",i))}}}}),D=(i(66),i(67)),W=i(4),y=(s={},r()(s,D.a.name,D.a),r()(s,C.name,C),r()(s,w.a.name,w.a),r()(s,k.name,k),r()(s,m.name,m),{components:(o={},r()(o,D.a.name,D.a),r()(o,C.name,C),r()(o,w.a.name,w.a),r()(o,k.name,k),r()(o,m.name,m),o),created:function(){var t=this;window.addEventListener("addGoodsToCart",function(e){var i=t.goods.find(function(t){return t.id==e.detail.goods_id});i.num++,plus.nativeUI.toast("我是购物车页面,当前苹果数量为"+i.num),console.log(e.detail)})},data:function(){return{checkedGoods:["1","2","3"],goods:[{id:"1",title:"进口香蕉",desc:"约250g，2根",price:200,num:1,thumb:"https://img.yzcdn.cn/public_files/2017/10/24/2f9a36046449dafb8608e99990b3c205.jpeg"},{id:"2",title:"陕西蜜梨",desc:"约600g",price:690,num:1,thumb:"https://img.yzcdn.cn/public_files/2017/10/24/f6aabd6ac5521195e01e8e89ee9fc63f.jpeg"},{id:"3",title:"美国伽力果",desc:"约680g/3个",price:2680,num:1,thumb:"https://img.yzcdn.cn/public_files/2017/10/24/320454216bbe9e25c7651e1fa51b31fd.jpeg"}]}},computed:{submitBarText:function(){var t=this.checkedGoods.length;return"结算"+(t?"("+t+")":"")},totalPrice:function(){var t=this;return this.goods.reduce(function(e,i){return e+(-1!==t.checkedGoods.indexOf(i.id)?i.price:0)},0)}},methods:{formatPrice:function(t){return(t/100).toFixed(2)},onSubmit:function(){Object(W.a)({url:"./shop.orderConfirm.html",id:"shop.orderConfirm",title:"确认订单"})}}}),$={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("van-checkbox-group",{staticClass:"card-goods",model:{value:t.checkedGoods,callback:function(e){t.checkedGoods=e},expression:"checkedGoods"}},t._l(t.goods,function(e){return i("van-swipe-cell",{key:e.id,attrs:{"right-width":65}},[i("van-checkbox",{staticClass:"card-goods__item",attrs:{name:e.id}},[i("van-card",{attrs:{title:e.title,desc:e.desc,num:e.num,price:t.formatPrice(e.price),thumb:e.thumb}})],1),t._v(" "),i("div",{staticClass:"del-goods",attrs:{slot:"right"},slot:"right"},[t._v("删除")])],1)}),1),t._v(" "),i("van-submit-bar",{attrs:{price:t.totalPrice,disabled:!t.checkedGoods.length,"button-text":t.submitBarText},on:{submit:t.onSubmit}})],1)},staticRenderFns:[]};var G=i(9)(y,$,!1,function(t){i(556)},"data-v-035ff88a",null).exports,P=i(12),M={components:{cart:G},created:function(){plus.key.addEventListener("backbutton",function(){var t=plus.webview.currentWebview().parent();Object(P.d)(t)&&t.close()})}},S={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("cart")],1)},staticRenderFns:[]},z=i(9)(M,S,!1,null,null,null).exports;new c.default({el:"#app",render:function(t){return t(z)}})},556:function(t,e){},557:function(t,e){},559:function(t,e){}},[555]);