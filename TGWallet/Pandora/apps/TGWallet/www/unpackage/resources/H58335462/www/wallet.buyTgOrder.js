webpackJsonp([37],{716:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(0),n=(r(14),r(103),r(104)),s=(r(105),r(106)),o=(r(8),r(6)),d=(r(30),r(28)),l=(r(66),r(67)),u=(r(7),r(2)),i=(r(17),r(15)),c=(r(13),r(10)),_=r(12),R=r(1),E=r(3),f=r(4),O=r(46),I={ALL:0,ORDER_WATI_PAY:100,ORDER_CANCEL:110,ORDER_WATI_DELIVER:150,ORDER_WATI_RECEIVE:160,ORDER_FINISH:200,OrderStateDesc:{0:"全部",100:"待付款",110:"已取消",150:"待发货",160:"待收货",200:"订单完成"}},L=r(37),D=r(84),A=r.n(D);a.default.use(d.a);a.default.use(d.a);var v={name:"order-tab",props:["orderState","orderList"],data:function(){return{titleDesc:I.OrderStateDesc[this.orderState]}},created:function(){},methods:{gotoPay:function(e){d.a.confirm({title:"",message:"该订单已失效，重新去购买？",confirmButtonText:"现在去"}).then(function(){Object(f.a)({url:"./wallet.buyTg.html",id:"wallet.buyTg",title:"认购TG"})})},check:function(e){console.log(A()(e)),Object(f.a)({url:"./wallet.transInfo.html",id:"wallet.transInfo",title:"交易详情"},{},{tx:e.transAddress})},getDesc:function(e){return this.orderState!==I.ALL?"":I.OrderStateDesc[e]}}},h={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("van-tab",{attrs:{title:e.titleDesc}},[null!==e.orderList?r("van-cell-group",[e._l(e.orderList,function(t,a){return t.status===e.orderState&&0===e.orderState?r("van-cell",{key:a,attrs:{title:t.memo,label:e.getDesc(t.status)}},[e._v("\n      "+e._s(t.totalAmount)+"\n    ")]):e._e()}),e._v(" "),e._l(e.orderList,function(t,a){return t.status===e.orderState&&100===e.orderState?r("van-cell",{key:a,attrs:{title:t.memo},on:{click:function(r){e.gotoPay(t)}}},[e._v("\n      "+e._s(t.totalAmount)+"\n    ")]):e._e()}),e._v(" "),e._l(e.orderList,function(t,a){return t.status!==e.orderState||160!==e.orderState&&200!==e.orderState?e._e():r("van-cell",{key:a,attrs:{title:t.memo},on:{click:function(r){e.check(t)}}},[e._v("\n      "+e._s(t.totalAmount)+"\n    ")])})],2):e._e()],1)},staticRenderFns:[]},m=r(9)(v,h,!1,null,null,null).exports;a.default.use(i.a).use(c.a),a.default.use(u.a),a.default.use(l.a),a.default.use(d.a),a.default.use(o.a),a.default.use(n.a).use(s.a);a.default.use(i.a).use(c.a),a.default.use(u.a),a.default.use(l.a),a.default.use(d.a),a.default.use(o.a),a.default.use(n.a).use(s.a);var b={components:{OrderTab:m},created:function(){plus.key.addEventListener("backbutton",function(){var e=plus.webview.currentWebview().parent();Object(_.d)(e)&&e.close()});var e=this;plus.key.addEventListener("init",function(){e.init()}),e.init()},methods:{init:function(){var e=this;Object(R.a)(E.a.shopOrderGetOrderList,{pageSize:30,orderType:O.a.virtualShopTg}).then(function(t){e.orderList.ALL=t;for(var r=0;r<t.length;r++){var a=t[r].status;switch(Number(a)){case I.ORDER_WATI_PAY:e.orderList.ORDER_WATI_PAY.push(t[r]);break;case I.ORDER_WATI_DELIVER:e.orderList.ORDER_WATI_DELIVER.push(t[r]);break;case I.ORDER_WATI_RECEIVE:e.orderList.ORDER_WATI_RECEIVE.push(t[r]);break;case I.ORDER_FINISH:e.orderList.ORDER_FINISH.push(t[r])}}console.log(e.orderList.ALL)})},gotoOrderDetail:function(e){Object(f.a)({url:"./shop.orderDetail.html",id:"shop.orderDetail",title:"订单详情",needLoaded:!0},{},{orderId:e})},refund:function(e){d.a.confirm({title:"申请退款",message:"确定要退款吗？"}).then(function(){d.a.alert({title:"提示",message:"暂不支持线上退款，请邮箱至381090826@qq.com进行人工退款。"})})},gotoCancel:function(e){d.a.confirm({title:"取消订单",message:"确定要取消吗？"}).then(function(){Object(R.a)(E.a.shopOrderCancel,{orderId:e})})},gotoPay:function(e){Object(f.a)({url:"./wallet.send.html",id:"wallet.send",title:"收银台",needLoaded:!0},{},{orderId:e,orderType:O.a.shop,tokenAddress:L.a.tokenAddress})}},data:function(){return{active:0,orderList:{ALL:[],ORDER_WATI_PAY:[],ORDER_CANCEL:[],ORDER_WATI_DELIVER:[],ORDER_WATI_RECEIVE:[],ORDER_FINISH:[]},OrderState:I}}},p={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("van-tabs",{model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[r("order-tab",{attrs:{"order-state":e.OrderState.ALL,"order-list":e.orderList.ALL}}),e._v(" "),r("order-tab",{attrs:{"order-state":e.OrderState.ORDER_WATI_PAY,"order-list":e.orderList.ORDER_WATI_PAY}}),e._v(" "),r("order-tab",{attrs:{"order-state":e.OrderState.ORDER_WATI_RECEIVE,"order-list":e.orderList.ORDER_WATI_RECEIVE}}),e._v(" "),r("order-tab",{attrs:{"order-state":e.OrderState.ORDER_FINISH,"order-list":e.orderList.ORDER_FINISH}})],1)],1)},staticRenderFns:[]},S=r(9)(b,p,!1,null,null,null).exports;new a.default({el:"#app",render:function(e){return e(S)}})}},[716]);