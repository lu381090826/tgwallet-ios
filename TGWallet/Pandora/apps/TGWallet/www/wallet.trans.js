webpackJsonp([8],{717:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s(0),n=(s(14),s(13),s(10)),i=(s(17),s(15)),r=(s(20),s(11)),l=(s(24),s(25)),o=(s(8),s(6)),c=(s(21),s(22)),u=(s(61),s(62)),d=(s(59),s(60)),v=(s(173),s(128)),h=(s(7),s(2)),m=(s(16),s(719),s(5)),f=Object(m.k)("pagination"),p=f[0],g=f[1],b=f[2];function w(t,e,s){return{number:t,text:e,active:s}}var _=p({props:{value:Number,prevText:String,nextText:String,pageCount:Number,totalItems:Number,forceEllipses:Boolean,mode:{type:String,default:"multi"},itemsPerPage:{type:Number,default:10},showPageSize:{type:Number,default:5}},computed:{count:function(){var t=this.pageCount||Math.ceil(this.totalItems/this.itemsPerPage);return Math.max(1,t)},pages:function(){var t=[],e=this.count;if("multi"!==this.mode)return t;var s=1,a=e,n=void 0!==this.showPageSize&&this.showPageSize<e;n&&(a=(s=Math.max(this.value-Math.floor(this.showPageSize/2),1))+this.showPageSize-1)>e&&(s=(a=e)-this.showPageSize+1);for(var i=s;i<=a;i++){var r=w(i,i,i===this.value);t.push(r)}if(n&&this.showPageSize>0&&this.forceEllipses){if(s>1){var l=w(s-1,"...",!1);t.unshift(l)}if(a<e){var o=w(a+1,"...",!1);t.push(o)}}return t}},watch:{value:{handler:function(t){this.select(t||this.value)},immediate:!0}},methods:{select:function(t){t=Math.min(this.count,Math.max(1,t)),this.value!==t&&(this.$emit("input",t),this.$emit("change",t))}},render:function(t){var e=this,s=this.value,a="multi"!==this.mode,n=function(t){return function(){e.select(t)}};return t("ul",{class:g({simple:a})},[t("li",{class:[g("item",{disabled:1===s}),g("prev"),"van-hairline"],on:{click:n(s-1)}},[this.prevText||b("prev")]),this.pages.map(function(e){return t("li",{class:[g("item",{active:e.active}),g("page"),"van-hairline"],on:{click:n(e.number)}},[e.text])}),a&&t("li",{class:g("page-desc")},[this.slots("pageDesc")||s+"/"+this.count]),t("li",{class:[g("item",{disabled:s===this.count}),g("next"),"van-hairline"],on:{click:n(s+1)}},[this.nextText||b("next")])])}}),x=s(111),k=s(12),A=s(43),C=s(4);a.default.use(n.a).use(i.a).use(r.a).use(l.a).use(o.a).use(c.a).use(u.a).use(d.a).use(v.a).use(h.a).use(_);a.default.use(n.a).use(i.a).use(r.a).use(l.a).use(o.a).use(c.a).use(u.a).use(d.a).use(v.a).use(h.a).use(_);var S={data:function(){return{tokenAddress:"",walletAddress:"",balance:"---",selected:0,transList:null,page:1,offset:5,active:1}},created:function(){var t=this,e=plus.webview.currentWebview(),s=this;Object(k.c)(e.walletAddress)?this.walletAddress=e.walletAddress:this.walletAddress=plus.storage.getItem("walletAddress"),Object(k.c)(e.tokenAddress)&&(this.tokenAddress=e.tokenAddress),setTimeout(function(){A.a.getBalance(t.walletAddress).then(function(t){s.balance=t}),t.getData()},200)},methods:{send:function(){Object(C.a)({url:"./wallet.send.html",id:"wallet.send",titleStyle:{titleText:"转账",autoBackButton:!0,progress:{color:"#ff5c0a",height:"1%"}}},{},{tokenAddress:this.tokenAddress})},receive:function(){Object(C.a)({url:"./wallet.receive.html",id:"wallet.receive",title:"收款"})},pageChange:function(){this.getData()},subAddress:function(t){return t.substring(0,16)+"..."},getDesc:function(t,e,s,a){return t?"[合约交易]":e===this.walletAddress?"[转入]":"[转出]"},getTitle:function(t,e){return t===this.walletAddress?this.subAddress(e):this.subAddress(t)},unitAmount:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t/Math.pow(10,e)},getData:function(){var t=this,e=null;e=Object(k.c)(t.tokenAddress)?{module:"account",action:"tokentx",address:t.walletAddress,contractaddress:t.tokenAddress,startblock:0,endblock:999999999,page:t.page,offset:t.offset,sort:"desc"}:{module:"account",action:"txlist",address:t.walletAddress,startblock:0,endblock:999999999,page:t.page,offset:t.offset,sort:"desc"},o.a.loading("查询中..."),setTimeout(function(){x.a.get(e).then(function(e){for(var s=0;s<e.length;s++){Object(k.c)(e[s].tokenDecimal)?e[s].value=t.unitAmount(e[s].value,Number(e[s].tokenDecimal)):e[s].value=t.unitAmount(e[s].value),Object(k.a)(e[s].tokenSymbol)&&(e[s].tokenSymbol="Eth");var a=new Date(Number(e[s].timeStamp+"000"));if(e[s].date=a.toLocaleDateString().replace(/\//g,"-")+" "+a.toTimeString().substr(0,8),e[s].desc=t.getDesc(e[s].isContract,e[s].from,e[s].to),e[s].gasUsed=A.a.instance.fromWei(e[s].gasUsed,"gwei"),e[s].isContract=A.a.isContract(e[s].to),e[s].isContract){var n=A.a.abiDecoder().decodeMethod(e[s].input);e[s].tokenValue=t.unitAmount(n.params[1].value,e[s].tokenDecimal),e[s].tokenReceiveAddress=n.params[0].value,e[s].to=n.params[0].value}e[s].desc=t.getDesc(e[s].isContract,e[s].from,e[s].to),e[s].title=t.getTitle(e[s].from,e[s].to)}t.transList=e,o.a.clear()})},100)}}},y={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"body"},[s("div",{staticClass:"blank-space"}),t._v(" "),s("div",{staticClass:"box",staticStyle:{"text-align":"left"}},[s("div",[t._v("\n      钱包地址："),s("span",{staticClass:"address-font"},[t._v(t._s(t.walletAddress))])]),t._v(" "),s("div",[t._v("\n      合约地址："),s("span",{staticClass:"address-font"},[t._v(t._s(t.tokenAddress))])]),t._v(" "),s("div",[t._v("\n      合约余额："),s("span",[t._v(t._s(t.balance))])])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:null!==t.transList&&0===t.transList.length,expression:"transList !==null && transList.length === 0"}],staticClass:"box"},[s("div",{staticClass:"no-trans"},[s("div",[s("van-icon",{attrs:{name:"info-o",size:"50px"}})],1),t._v("\n      暂无交易记录\n    ")])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:null!==t.transList&&t.transList.length>0,expression:"transList !== null && transList.length > 0"}],staticClass:"box"},[t._l(t.transList,function(e,a){return s("div",{key:a,staticClass:"trans-cell-row"},[s("van-row",{attrs:{type:"flex",justify:"space-between",gutter:"20"}},[s("van-col",{attrs:{span:"2"}},[s("div",[e.isContract?s("van-icon",{staticStyle:{color:"#32bbde"},attrs:{name:"pending-orders",size:"35px"}}):s("van-icon",{staticStyle:{color:"#32bbde"},attrs:{name:"exchange-record",size:"35px"}})],1)]),t._v(" "),s("van-col",{attrs:{span:"20"}},[s("div",{staticClass:"trans-cell-row-inner"},[s("van-row",{attrs:{type:"flex",justify:"space-between",gutter:"20"}},[s("van-col",[t._v(t._s(e.title))]),t._v(" "),s("van-col",[t._v(t._s(e.value)+t._s(e.tokenSymbol))])],1)],1),t._v(" "),s("div",{staticClass:"trans-cell-row-inner"},[s("span",{staticStyle:{"font-size":"13px"}},[t._v(t._s(e.desc))]),t._v(" "),s("span",{staticStyle:{"font-size":"10px",color:"#c8c8c8"}},[t._v("交易费用:"+t._s(e.gasUsed))])]),t._v(" "),s("div",{staticClass:"trans-cell-row-inner"},[s("span",{staticStyle:{"font-size":"13px",color:"gray"}},[t._v(t._s(e.date))])])])],1)],1)}),t._v(" "),s("div",{staticClass:"trans-cell-bottom"},[s("van-pagination",{attrs:{"page-count":5,mode:"simple"},on:{change:t.pageChange},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})],1)],2),t._v(" "),s("div",{staticClass:"box"},[s("div",{staticStyle:{"margin-top":"5%","margin-bottom":"5%"}},[s("van-button",{directives:[{name:"intervalclick",rawName:"v-intervalclick",value:{func:t.send},expression:"{func:send}"}],staticClass:"button-blue",attrs:{size:"large"}},[t._v("\n        转账\n      ")])],1),t._v(" "),s("div",{staticStyle:{"margin-bottom":"5%"}},[s("van-button",{attrs:{size:"large"}},[t._v("\n        收款\n      ")])],1)])])},staticRenderFns:[]};var z=s(9)(S,y,!1,function(t){s(718)},"data-v-39069801",null).exports,D={data:function(){return{}},components:{Trans:z}},L={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("Trans")],1)},staticRenderFns:[]},P=s(9)(D,L,!1,null,null,null).exports;new a.default({el:"#app",render:function(t){return t(P)}})},718:function(t,e){},719:function(t,e){}},[717]);