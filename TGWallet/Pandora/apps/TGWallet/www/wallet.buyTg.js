webpackJsonp([21],{714:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a(0),n=(a(14),a(36),a(33)),s=(a(34),a(31)),i=(a(7),a(2)),u=(a(17),a(15)),o=(a(13),a(10)),r=(a(146),a(147)),c=(a(8),a(6)),d=(a(107),a(108)),m=(a(171),a(172)),v=(a(30),a(28)),h=a(37),f=a(79),b=a(4),g=a(3),w=a(1),y=a(12),A=a(55),p=a(111);l.default.use(n.a).use(s.a).use(i.a).use(u.a).use(o.a).use(r.a).use(c.a).use(d.a).use(m.a).use(v.a);f.a;l.default.use(n.a).use(s.a).use(i.a).use(u.a).use(o.a).use(r.a).use(c.a).use(d.a).use(m.a).use(v.a);var _={data:function(){return{tokenAddress:h.a.tokenAddress,walletAddress:plus.storage.getItem("walletAddress"),walletName:plus.storage.getItem("walletName"),buyNum:null,walletListActions:[],walletList:null,showWalletList:null,walletQcode:!1,dollarRate:null,ethRate:null,dollarAmount:null,ethAmount:null,rangeMin:3,rangeMax:300,rangeValue:3}},created:function(){this.reflashRate()},methods:{gasQuestion:function(){v.a.alert({title:"什么是燃料费？",message:"燃料费（Gas）是给矿工的佣金，并以 ETH 支付，无论是交易、执行智能合约并启动 DApps，还是支付数据存储费用，都需要用到燃料费。燃料费价格高低会影响交易的确认速度。",confirmButtonText:"好的"}).then(function(){})},reflashRate:function(){var e=this;Object(w.a)(g.a.buyTgDollarRate).then(function(t){e.dollarRate=Number(t)}),p.a.get({module:"stats",action:"ethprice"}).then(function(t){e.ethRate=t.ethusd})},calculate:function(){this.dollarAmount=A.a.accMul(this.buyNum,this.dollarRate),Object(y.a)(this.ethRate)?this.ethAmount="查询异常，稍后重试":this.ethAmount=A.a.accMul(this.buyNum,1/this.ethRate).toFixed(6)},selectWallet:function(){var e=this;0===e.walletListActions.length&&(c.a.loading(),Object(w.a)(g.a.walletList).then(function(t){if(Object(y.a)(t.length))return Object(c.a)("出错了T_T"),!1;for(var a=0;a<t.length;a++)t[a].name=t[a].walletName,t[a].subname=t[a].walletAddress.substring(0,10)+"...",t[a].type="wallet";e.walletListActions=t,c.a.clear()})),this.showWalletList=!this.showWalletList},onSelect:function(e){Object(y.a)(e)||(this.showWalletList=!1,this.walletName=e.walletName,this.walletAddress=e.walletAddress)},onCancel:function(){this.showWalletList=!1},showWalletQcode:function(){this.walletQcode=!this.walletQcode},gotoBuyTgOrder:function(){Object(b.a)({url:"./wallet.buyTgOrder.html",id:"wallet.buyTgOrder",title:"Tg购买记录"},{},{isnew:!0})},gotoBuy:function(){var e=this;Object(w.a)(g.a.buyTgBeforeCheck,{buyNum:this.buyNum}).then(function(t){if(101===t)return v.a.confirm({message:"需要进行身份验证才可以认购，现在去认证？"}).then(function(){Object(b.a)({url:"./verify.idcard.html",id:"verify.idcard",title:"认证中心"})}),!1;if(102===t)return v.a.confirm({message:"尊敬的客户，您认购的数量较大，需进行人工审核，现在提交审核吗？",confirmButtonText:"去提交"}).then(function(){Object(b.a)({url:"./verify.buyTgAudit.html",id:"verify.buyTgAudit",title:"认购审核"})}),!1;if(!e.buyNum||0===e.buyNum)return c.a.fail("请输入正确的金额"),!1;var a=e;Object(b.a)({url:"./common.bank.html",id:"common.bank",title:"收银台"},{},{buyNum:a.buyNum,walletAddress:a.walletAddress,dollarAmount:a.dollarAmount,ethAmount:a.ethAmount,gasValue:a.gasValue,gasValueAmount:a.gasValueAmount})})}},computed:{gasValue:{get:function(){return(Number(this.rangeValue)/1e4).toFixed(7)},set:function(){return(Number(this.rangeValue)/1e4).toFixed(7)}},gasValueAmount:{get:function(){var e=this.gasValue*this.ethRate*this.dollarRate;return Math.ceil(100*e)/100},set:function(){}}},components:{QrcodeVue:f.a}},k={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"body"},[a("div",{staticClass:"text-left"},[a("div",{staticClass:"box"},[e._m(0),e._v(" "),a("van-cell-group",[a("van-cell",{attrs:{title:"合约名称"}},[e._v("TGCoin (TG)")]),e._v(" "),a("van-cell",{attrs:{title:"发布数量"}},[e._v("68亿")]),e._v(" "),a("van-cell",{attrs:{title:"流通总量"}},[e._v("68亿")]),e._v(" "),a("van-cell",{attrs:{title:"官网"}},[e._v("www.thanksgiving.cn")]),e._v(" "),a("van-cell",{attrs:{title:"实时价格","is-link":""},on:{click:e.reflashRate}},[e._v("1TG ≈ 1$ ≈ "+e._s(e.dollarRate)+"￥")]),e._v(" "),a("van-cell",{attrs:{title:"简介",label:"感恩链（TG）公开透明的区块链公益平台"}}),e._v(" "),a("van-cell",{attrs:{title:"合约地址（点击可查看二维码）",label:e.tokenAddress,clickable:""},on:{click:e.showWalletQcode}})],1)],1),e._v(" "),a("van-cell-group",{attrs:{border:!1}},[a("van-cell",[a("van-field",{attrs:{placeholder:"请输入要购入的数量",type:"number",label:"购买数"},on:{input:function(t){e.calculate()}},model:{value:e.buyNum,callback:function(t){e.buyNum=t},expression:"buyNum"}})],1),e._v(" "),a("van-cell",[a("van-field",{attrs:{label:"预计金额(￥)",readonly:!0,disable:""},model:{value:e.dollarAmount,callback:function(t){e.dollarAmount=t},expression:"dollarAmount"}}),e._v(" "),a("van-field",{attrs:{label:"预计金额(Eth)",readonly:!0,disable:""},model:{value:e.ethAmount,callback:function(t){e.ethAmount=t},expression:"ethAmount"}})],1),e._v(" "),a("van-cell",{attrs:{title:"转入钱包(点击可更换)",label:e.walletAddress,icon:"cash-back-record"},on:{click:e.selectWallet}}),e._v(" "),a("van-cell",{attrs:{title:"燃料费(ETH)",readonly:!0,disableClear:"",label:e.gasValue+" ≈ "+e.gasValueAmount+"￥",icon:"question-o"},on:{click:e.gasQuestion}}),e._v(" "),a("van-slider",{attrs:{min:e.rangeMin,max:e.rangeMax,step:1e-5},model:{value:e.rangeValue,callback:function(t){e.rangeValue=t},expression:"rangeValue"}})],1),e._v(" "),a("van-button",{directives:[{name:"intervalclick",rawName:"v-intervalclick",value:{func:e.gotoBuy},expression:"{func:gotoBuy}"}],staticClass:"button-orange",staticStyle:{"margin-top":"10%"},attrs:{type:"default",size:"large"}},[e._v("\n        立即购买\n      ")]),e._v(" "),a("van-button",{directives:[{name:"intervalclick",rawName:"v-intervalclick",value:{func:e.gotoBuyTgOrder},expression:"{func:gotoBuyTgOrder}"}],staticStyle:{"margin-top":"5%","margin-bottom":"10%"},attrs:{type:"default",size:"large"}},[e._v("\n        购买记录\n      ")])],1)]),e._v(" "),a("van-actionsheet",{attrs:{"cancel-text":"取消",actions:e.walletListActions},on:{select:e.onSelect,cancel:e.onCancel},model:{value:e.showWalletList,callback:function(t){e.showWalletList=t},expression:"showWalletList"}}),e._v(" "),a("van-popup",{staticClass:"box",staticStyle:{width:"150px"},model:{value:e.walletQcode,callback:function(t){e.walletQcode=t},expression:"walletQcode"}},[a("qrcode-vue",{staticStyle:{"margin-top":"3%"},attrs:{value:e.tokenAddress,size:150,level:"H"}})],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticStyle:{"margin-left":"35%","margin-bottom":"3%"}},[t("img",{attrs:{src:a(268)}})])}]};var x=a(9)(_,k,!1,function(e){a(715)},"data-v-5a33757c",null).exports;new l.default({el:"#app",render:function(e){return e(x)}})},715:function(e,t){}},[714]);