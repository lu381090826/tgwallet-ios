webpackJsonp([1],{562:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(0),i=(a(14),a(34),a(31)),s=(a(17),a(15)),l=(a(7),a(2)),r=(a(16),a(564),a(26)),o=a.n(r),d=a(5),c=a(29),u=a(10),f=Object(d.k)("contact-card"),v=f[0],p=f[1],b=f[2];function h(t,e,a,n){var i=e.type,s=e.editable;return t(u.a,o()([{attrs:{center:!0,border:!1,isLink:s,valueClass:p("value"),icon:"edit"===i?"contact":"add-square"},class:p([i]),on:{click:function(t){s&&Object(c.a)(n,"click",t)}}},Object(c.b)(n)]),["add"===i?e.addText||b("addText"):[t("div",[b("name")+"："+e.name]),t("div",[b("tel")+"："+e.tel])]])}h.props={tel:String,name:String,addText:String,editable:{type:Boolean,default:!0},type:{type:String,default:"add"}};var m=v(h),g=(a(204),a(565),a(11)),k=a(45),y=a(44),O=Object(d.k)("contact-list"),j=O[0],w=O[1],x=O[2];function S(t,e,a,n){var i=e.list.map(function(e,a){return t(u.a,{key:e.id,attrs:{isLink:!0,valueClass:w("item-value")},class:w("item"),scopedSlots:{default:function(){return t(k.a,{attrs:{name:e.id}},[t("div",{class:w("name")},[e.name+"，"+e.tel])])},"right-icon":function(){return t(g.a,{attrs:{name:"edit"},class:w("edit"),on:{click:function(t){t.stopPropagation(),Object(c.a)(n,"edit",e,a)}}})}},on:{click:function(){Object(c.a)(n,"input",e.id),Object(c.a)(n,"select",e,a)}}})});return t("div",o()([{class:w()},Object(c.b)(n)]),[t(y.a,{attrs:{value:e.value},class:w("group")},[i]),t(l.a,{attrs:{square:!0,size:"large",type:"danger",text:e.addText||x("addText")},class:w("add"),on:{click:function(){Object(c.a)(n,"add")}}})])}S.props={value:null,list:Array,addText:String};var _=j(S),C=(a(163),a(82),a(134),a(191),a(566),a(32)),I=a(33),L=a(6),T=a(28),N=a(274),B=Object(d.k)("contact-edit"),E=B[0],A=B[1],D=B[2],F={tel:"",name:""},$=E({props:{isEdit:Boolean,isSaving:Boolean,isDeleting:Boolean,contactInfo:{type:Object,default:function(){return Object(C.a)({},F)}},telValidator:{type:Function,default:N.a}},data:function(){return{data:Object(C.a)({},F,this.contactInfo),errorInfo:{name:!1,tel:!1}}},watch:{contactInfo:function(t){this.data=Object(C.a)({},F,t)}},methods:{onFocus:function(t){this.errorInfo[t]=!1},getErrorMessageByKey:function(t){var e=this.data[t].trim();switch(t){case"name":return e?"":D("nameEmpty");case"tel":return this.telValidator(e)?"":D("telInvalid")}},onSave:function(){var t=this;["name","tel"].every(function(e){var a=t.getErrorMessageByKey(e);return a&&(t.errorInfo[e]=!0,Object(L.a)(a)),!a})&&!this.isSaving&&this.$emit("save",this.data)},onDelete:function(){var t=this;T.a.confirm({message:D("confirmDelete")}).then(function(){t.$emit("delete",t.data)})}},render:function(t){var e=this,a=this.data,n=this.errorInfo,i=function(t){return function(){return e.onFocus(t)}};return t("div",{class:A()},[t(I.a,{attrs:{clearable:!0,maxlength:"30",label:D("name"),placeholder:D("nameEmpty"),error:n.name},on:{focus:i("name")},model:{value:a.name,callback:function(t){a.name=t}}}),t(I.a,{attrs:{clearable:!0,type:"tel",label:D("tel"),placeholder:D("telEmpty"),error:n.tel},on:{focus:i("tel")},model:{value:a.tel,callback:function(t){a.tel=t}}}),t("div",{class:A("buttons")},[t(l.a,{attrs:{block:!0,type:"danger",text:D("save"),loading:this.isSaving},on:{click:this.onSave}}),this.isEdit&&t(l.a,{attrs:{block:!0,text:D("delete"),loading:this.isDeleting},on:{click:this.onDelete}})])])}}),M=(a(52),a(53),a(20),a(8),a(36),a(13),a(567),Object(d.k)("panel")),P=M[0],U=M[1];function q(t,e,a,n){return t(s.a,o()([{class:U(),scopedSlots:{default:function(){return[a.header?a.header():t(u.a,{attrs:{icon:e.icon,label:e.desc,title:e.title,value:e.status,valueClass:U("header-value")},class:U("header")}),t("div",{class:U("content")},[a.default&&a.default()]),a.footer&&t("div",{class:[U("footer"),"van-hairline--top"]},[a.footer()])]}}},Object(c.b)(n,!0)]))}q.props={icon:String,desc:String,title:String,status:String};var z=P(q),K=(a(568),Object(d.k)("address-item")),V=K[0],W=K[1];function G(t,e,a,n){var i=e.disabled,s=e.switchable;return t(u.a,o()([{class:W({disabled:i,unswitchable:!s}),attrs:{valueClass:W("value"),isLink:!i&&s},scopedSlots:{default:function(){var a=e.data,n=[t("div",{class:W("name")},[a.name+"，"+a.tel]),t("div",{class:W("address")},[a.address])];return e.switchable?t(k.a,{attrs:{name:a.id}},[n]):n},"right-icon":function(){return t(g.a,{attrs:{name:"edit"},class:W("edit"),on:{click:function(t){t.stopPropagation(),Object(c.a)(n,"edit")}}})}},on:{click:function(){e.switchable&&Object(c.a)(n,"select")}}},Object(c.b)(n)]))}G.props={data:Object,disabled:Boolean,switchable:Boolean};var J=V(G),R=Object(d.k)("address-list"),H=R[0],Q=R[1],X=R[2];function Y(t,e,a,n){var i=function(a,i){return a.map(function(a,s){return t(J,{attrs:{data:a,disabled:i,switchable:e.switchable&&!i},key:a.id,on:{select:function(){Object(c.a)(n,i?"select-disabled":"select",a,s)},edit:function(){Object(c.a)(n,i?"edit-disabled":"edit",a,s)}}})})},s=i(e.list),r=i(e.disabledList,!0);return t("div",o()([{class:Q()},Object(c.b)(n)]),[a.top&&a.top(),t(y.a,{attrs:{value:e.value},on:{input:function(t){Object(c.a)(n,"input",t)}}},[s]),e.disabledText&&t("div",{class:Q("disabled-text")},[e.disabledText]),r,a.default&&a.default(),t(l.a,{attrs:{square:!0,size:"large",type:"danger",text:e.addButtonText||X("add")},class:Q("add"),on:{click:function(){Object(c.a)(n,"add")}}})])}Y.props={list:Array,disabledList:Array,disabledText:String,addButtonText:String,value:[String,Number],switchable:{type:Boolean,default:!0}};var Z=H(Y),tt=(a(168),a(169)),et=a(4),at=a(1),nt=a(3),it=a(80),st=a(46),lt=a(37),rt=a(55),ot=a(12),dt=a(58);n.default.use(tt.a),n.default.use(Z),n.default.use(z),n.default.use(u.a),n.default.use(I.a),n.default.use(L.a),n.default.use(g.a),n.default.use(k.a),n.default.use(y.a),n.default.use(i.a).use(s.a).use(l.a).use(m).use(_).use($);n.default.use(tt.a),n.default.use(Z),n.default.use(z),n.default.use(u.a),n.default.use(I.a),n.default.use(L.a),n.default.use(g.a),n.default.use(k.a),n.default.use(y.a),n.default.use(i.a).use(s.a).use(l.a).use(m).use(_).use($);var ct={data:function(){return{skuNo:"",radio:it.a.eth_tg,chosenContactId:null,editingContact:{},showList:!1,showEdit:!1,isEdit:!1,linkman:null,price:null,units:null,priceCn:null,goods:{skuName:"",buyNum:""},orderId:""}},created:function(){var t=this,e=this;window.addEventListener("updateLinkman",function(t){e.linkman=t.detail});var a=plus.webview.currentWebview();this.skuNo=a.skuNo,Object(at.a)(nt.a.goodsDetail,{skuNo:this.skuNo}).then(function(e){t.goods=e,t.goods.buyNum="x 1",t.goods.price=e.price.toFixed(2),t.goods.priceCn=e.originPriceCn.toFixed(2),t.price=t.goods.price,t.priceCn=t.goods.priceCn,t.units=e.units}),Object(at.a)(nt.a.shopLinkmanList,{skuNo:this.skuNo,defaultAddress:1}).then(function(e){Object(ot.d)(e[0])&&(t.linkman=e[0],t.linkman.phone=t.linkman.phone.replace(/^(\d{3})\d{4}(\d{4})$/,"$1****$2"))})},methods:{getUnits:function(){return this.radio===it.a.eth_tg?this.units:this.radio===it.a.wxpay?"￥":void 0},priceTotal:function(){return this.radio===it.a.eth_tg?rt.a.accMul(this.price,100):this.radio===it.a.wxpay?rt.a.accMul(this.priceCn,100):void 0},priceShow:function(){return this.radio===it.a.eth_tg?this.price+this.getUnits():this.radio===it.a.wxpay?this.priceCn+this.getUnits():void 0},onSubmit:function(){var t=this;Object(ot.b)(this.linkman)&&L.a.fail("请选择联系人");var e={skuList:[{skuNo:this.skuNo,buyNum:1}],linkmanId:this.linkman.id,payType:this.radio,memo:""};Object(at.a)(nt.a.shopOrderCreate,e).then(function(e){t.orderId=e,Object(ot.c)(e)&&(t.radio===it.a.eth_tg?Object(et.a)({url:"./wallet.send.html",id:"wallet.send",title:"收银台",needLoaded:!0},{},{orderId:t.orderId,orderType:st.a.shop,tokenAddress:lt.a.tokenAddress}):t.radio===it.a.wxpay&&Object(et.a)({url:"./wallet.sendLegalCurrency.html",id:"wallet.sendLegalCurrency",title:"收银台",needLoaded:!0},{},{orderId:t.orderId,orderType:st.a.shop}),Object(dt.a)(plus.webview.getWebviewById("shop.order"),"init"))})},gotoLinkman:function(){Object(et.a)({url:"./shop.linkman.html",id:"shop.linkman",title:"联系人"})}},computed:{cardType:function(){return null!==this.chosenContactId?"edit":"add"},currentContact:function(){var t=this.chosenContactId;return null!==t?this.list.filter(function(e){return e.id===t})[0]:{}}}},ut={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("van-cell-group",[null!=t.linkman?a("van-cell",{attrs:{title:t.linkman.name,label:t.linkman.address,value:t.linkman.phone,"is-link":"",clickable:""},on:{click:t.gotoLinkman}}):a("van-cell",{attrs:{title:"收货地址",label:"点击查看我的联系人",value:"","is-link":"",clickable:""},on:{click:t.gotoLinkman}})],1),t._v(" "),a("div",{staticClass:"orderConfirm-address"}),t._v(" "),a("br"),t._v(" "),a("van-cell-group",[a("van-panel",{attrs:{title:t.goods.skuName,desc:t.goods.buyNum,status:t.priceShow()}})],1),t._v(" "),a("br"),t._v(" "),a("van-cell-group",[a("van-cell",{attrs:{title:"配送方式",value:"免运费"}})],1),t._v(" "),a("br"),t._v(" "),a("van-cell-group",[a("van-field",{attrs:{label:"商品备注",placeholder:"建议下单前与客服沟通确认"}})],1),t._v(" "),a("br"),t._v(" "),a("van-cell-group",[a("div",{staticStyle:{"padding-left":"5%","padding-top":"5%","font-size":"14px","border-top":"0.5px solid #fbfbfb"}},[t._v("\n      购买方式\n    ")]),t._v(" "),a("div",{staticStyle:{"margin-top":"5%"}},[a("van-radio-group",{model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[a("van-cell-group",[a("van-cell",{attrs:{title:"TG积分"},on:{click:function(e){t.radio="10"}}},[a("van-radio",{attrs:{name:"10"}})],1),t._v(" "),a("van-cell",{attrs:{title:"法币"},on:{click:function(e){t.radio="20"}}},[a("van-radio",{attrs:{name:"20"}})],1)],1)],1)],1)]),t._v(" "),a("van-submit-bar",{attrs:{price:t.priceTotal(),currency:t.getUnits(),"button-text":"提交订单"},on:{submit:t.onSubmit}})],1)},staticRenderFns:[]};var ft=a(9)(ct,ut,!1,function(t){a(563)},"data-v-6977014e",null).exports;new n.default({el:"#app",render:function(t){return t(ft)}})},563:function(t,e){},564:function(t,e){},565:function(t,e){},566:function(t,e){},567:function(t,e){},568:function(t,e){}},[562]);